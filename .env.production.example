# Production Environment Configuration

ENV=production

# Server Configuration
# NOTE: In most architectures, run app on 8080 and let load balancer/gateway handle TLS
PAYMENTS_SERVER_PORT=8080
PAYMENTS_SERVER_READ_TIMEOUT=15s
PAYMENTS_SERVER_WRITE_TIMEOUT=15s
PAYMENTS_SERVER_SHUTDOWN_TIMEOUT=30s

# TLS Configuration (OPTIONAL - usually handled by AWS ALB, nginx, API gateway)
# Enable ONLY if app is directly exposed or end-to-end encryption required
PAYMENTS_SERVER_TLS_ENABLED=false
# PAYMENTS_SERVER_TLS_CERT_FILE=/etc/payments/certs/cert.pem
# PAYMENTS_SERVER_TLS_KEY_FILE=/etc/payments/certs/key.pem
# PAYMENTS_SERVER_TLS_MIN_VERSION=1.3

# Database Configuration
PAYMENTS_DATABASE_HOST=prod-db.internal
PAYMENTS_DATABASE_PORT=5432
PAYMENTS_DATABASE_USER=payments
PAYMENTS_DATABASE_PASSWORD=  # ⚠️  FROM SECRETS MANAGER (AWS Secrets Manager, K8s Secret, etc.)
PAYMENTS_DATABASE_DATABASE=payments
PAYMENTS_DATABASE_MAX_CONNECTIONS=25
PAYMENTS_DATABASE_MIN_CONNECTIONS=5
PAYMENTS_DATABASE_CONN_MAX_LIFETIME=1h
PAYMENTS_DATABASE_SSL_MODE=require  # ⚠️  REQUIRED in production

# Redis Configuration
PAYMENTS_REDIS_HOST=prod-redis.internal
PAYMENTS_REDIS_PORT=6379
PAYMENTS_REDIS_DB=0
PAYMENTS_REDIS_PASSWORD=  # ⚠️  FROM SECRETS MANAGER

# Authentication Configuration
PAYMENTS_AUTH_JWT_SECRET=  # ⚠️  FROM SECRETS MANAGER - MUST BE 32+ CHARS
PAYMENTS_AUTH_JWT_EXPIRY=24h

# CORS Configuration (⚠️  NO WILDCARDS IN PRODUCTION)
PAYMENTS_SERVER_CORS_ALLOWED_ORIGINS=https://app.example.com,https://admin.example.com
PAYMENTS_SERVER_CORS_ALLOW_CREDENTIALS=true

# Payment Processing Configuration
PAYMENTS_PAYMENT_MAX_RETRIES=3
PAYMENTS_PAYMENT_RETRY_DELAY=1s
PAYMENTS_PAYMENT_LOCK_TTL=30s
PAYMENTS_PAYMENT_PROCESSING_TIMEOUT=60s
PAYMENTS_PAYMENT_CIRCUIT_BREAKER_THRESHOLD=10
PAYMENTS_PAYMENT_CIRCUIT_BREAKER_TIMEOUT=30s

# Observability Configuration
PAYMENTS_OBSERVABILITY_LOG_LEVEL=warn
PAYMENTS_OBSERVABILITY_JAEGER_ENDPOINT=http://jaeger.internal:14268/api/traces
PAYMENTS_OBSERVABILITY_ENABLE_METRICS=true
PAYMENTS_OBSERVABILITY_ENABLE_TRACING=true

# Instance ID
PAYMENTS_INSTANCE_ID=payments-prod-1

# =====================================================================
# SECURITY NOTES:
# =====================================================================
#
# 1. NEVER commit real secrets to version control
# 2. Use a secrets manager in production:
#    - AWS: AWS Secrets Manager, Parameter Store
#    - K8s: Kubernetes Secrets, External Secrets Operator
#    - HashiCorp Vault
# 3. Rotate secrets regularly (at least quarterly)
# 4. Use strong, random values for all secrets
# 5. Enable database SSL/TLS (ssl_mode=require)
# 6. Use TLS 1.3 for HTTPS (min_version=1.3)
# 7. Whitelist specific CORS origins (no wildcards)
# 8. Monitor for unauthorized access attempts
#
# Generate strong JWT secret:
#   openssl rand -base64 48
#
# =====================================================================
